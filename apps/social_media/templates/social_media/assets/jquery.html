<!-- this contains all the jQuery used in this project / it is included using template inheritance in base.html -->

<script type="text/javascript">
    $(document).ready(function() {

    // isotope layout defined
        var $grid = $('.grid').isotope({
            itemSelector: '.grid-item',
            percentPosition: true,
            masonry: {
                columnWidth: '.grid-sizer'
            }
        });

        $grid.imagesLoaded().progress(function() {
            $grid.isotope('layout');
        });


    // new post - when image selected, launches modal and shows image preview
        function readURL(input) {
            console.log(input);
            console.log(input.files);
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    var image = new Image();
                    image.src = e.target.result;

                    image.onload = function() {
                        var imgOr;
                        // console.log(this.width , this.height);
                    // determine proper image orientation (portrait or landscape - ratio 1:1 treated as portrait)
                        if (this.width > this.height) {
                            imgOr = 'ls';
                        } else {
                            imgOr = 'pt';
                        }
                    // create the html for the image preview - orientation added to class for sizing (see style.css)
                        var imagePreview = '<img id="selectedImageFile" class="img-thumbnail ' + imgOr + '" src="' + this.src + '" alt="selected image file" style="border:none;" />';
                    // create inner html for image preview
                        $('#imgPreview').html(imagePreview);
                    // update hidden input value for image orientation
                        $('#orientation')[0].value = imgOr;
                    }
                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        $(function() {
            $('#photoInput').change(function() {
                $('#newPostModalButton').trigger('click');
                readURL(this);
            });
        });


    });
</script>
